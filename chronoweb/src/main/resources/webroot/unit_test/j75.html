<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>J75 - deleteSubscription - DELETE /epcis/queries/:queryName/subscriptions/:subscriptionID (application/json)</title>

</head>
<script src="../vendor/jquery/jquery.min.js"></script>
<script>
	function deleteSubscription() {

		var queryName = $('#queryName').val();
		if (queryName == null || queryName.length === 0)
			queryName = $('#queryName').attr('placeholder');
		
		var subscriptionID = $('#subscriptionID').val();
		if (subscriptionID == null || subscriptionID.length === 0)
			subscriptionID = $('#subscriptionID').attr('placeholder');
		
		$('#url').html('HTTP.DELETE /epcis/queries/' + queryName + '/subscriptions/' + subscriptionID + ' (application/json)');
		$('#queryName').val(queryName);
		$('#subscriptionID').val(subscriptionID);

		$.ajax({
			type: "DELETE",
			url: "http://localhost:8080/epcis/queries/" + queryName + "/subscriptions/" + subscriptionID,
			contentType: "application/json",
			crossOrigin: true
		}).done((data, textStatus, xhr) => {
			$('.result').remove();
			$('#result').empty();
			$('#result').append('<br><input class="result" type="text" value="response status" readonly />');
			$('#result').append('<input class="result" type="text" value=' + xhr.status + ' readonly />');
			$('#result').append('<br><input class="result" type="text" value="response headers" readonly />');
			$('#result').append('<textarea class="result" cols=100 rows=15 readonly>' + xhr.getAllResponseHeaders() + ' </textarea>');
		}).fail((xhr) => {
			$('.result').remove();
			$('#result').empty();
			$('#result').append('<br><input class="result" type="text" value="response status" readonly />');
			$('#result').append('<input class="result" type="text" value=' + xhr.status + ' readonly />');
			$('#result').append('<br><input class="result" type="text" value="response body" readonly />');
			$('#result').append('<textarea class="result" cols=100 rows=15 readonly>' + JSON.stringify(JSON.parse(xhr.responseText), null, 4) + ' </textarea>');
		});
	} 
</script>

<body>
	<div id="url">HTTP.DELETE /epcis/queries/:queryName/subscriptions/:subscriptionID (application/json)</div>
	<input type="text" value=":queryName" readonly />
	<input id="queryName" type="text" placeholder="latestEvent" />
	<br>
	<input type="text" value=":subscriptionID" readonly />
	<input id="subscriptionID" type="text" placeholder="5" />
	<br>
	<input id="button" type="button" onclick="deleteSubscription()" value="invoke" />
	<br>
	<div id="result">
	</div>
</body>
<script>
	$(document).ready(function () {
		$("#queryName").on('change', function postinput() {
			var queryName = $('#queryName').val(); // this.value
			var subscriptionID = $('#subscriptionID').val();
			$('#url').html('HTTP.DELETE /epcis/queries/' + queryName + '/subscriptions/' + subscriptionID + ' (application/json)');
		});
		$("#subscriptionID").on('change', function postinput() {
			var queryName = $('#queryName').val(); // this.value
			var subscriptionID = $('#subscriptionID').val();
			$('#url').html('HTTP.DELETE /epcis/queries/' + queryName + '/subscriptions/' + subscriptionID + ' (application/json)');
		});
	}); 
</script>
<footer>
	<p>Copyright Â© 2020-2024 Jaewook Byun all rights reserved.</p>
	<p>Jaewook Byun, Ph.D., Assistant Professor, Sejong University, Republic of Korea, Associate Director, Auto-ID Labs, Korea</p>
</footer>
</html>